# 3.1 内存管理概念
## 3.1.1 内存管理的基本原理和要求

**内存管理的功能**
1. 内存空间的分配与回收
2. 地址转换
3. 内存空间的扩充
4. 存储保护


***
### 1.程序装入和链接
1. 编译
2. 链接
   - 由链接程序将编译后形成的一组目标模块以及所需的库函数链接在一起，形成一个完整的装入模块。
3. 装入
- 链接的三种方式
   1. 静态链接
   2. 装入时动态链接
   3. 运行时动态链接
- 装入的三种方式
   1. 绝对装入(还没有操作系统)
   2. 可重定位装入(早期批处理操作系统)
      1. 装入时更改指令的地址
      2. 特点：装入时必须分配它要求的全部内存，若没有足够内存则不能装入。
   3. 动态运行时装入(现代操作系统)
      1. 全部为相对地址
      2. 特点：需要重定位寄存器
***
### 2.内存保护
让各个进程自己访问自己的内存空间
内存保护的两种方法
1. 设置上下限寄存器
2. 采用重定位寄存器和界地址寄存器(逻辑地址的上限)又称基址和限长寄存器

## 3.1.2 连续分配管理方式
1. 单一连续分配
   1. 内存被分为系统区(通常位于低地址)和用户区
   2. 内存中只能有一道程序，用户程序独占整个用户区
   3. 👍优点：实现简单、无外部碎片、可以采用覆盖技术扩充内存、不一定需要采取内存保护
   4. 👎缺点：只能用于单用户、单任务的操作系统中、有内部碎片、存储器利用率极低。
2. 固定分区分配
   1. 将用户区分成若干分区，每个分区只能装入一道作业
   2. 分区大小相等
      - 缺乏灵活性，但是很适用于用一台计算机控制多个相同对象的场合
   3. 分区大小不等
      1. 增加了灵活性，可以满足不同大小的进程需求
   4. 需要建立一个分区说明表来记录分区的大小、起始地址、状态
   5. 👍优点：实现简单、无外部碎片
   6. 👎缺点：
      1. 当用户程序太大时，可能所有的分区都不能满足，此时不得不采用覆盖技术来解决，但又会降低性能
      2. 会产生内部碎片，内存利用率低
3. 动态分区分配
   1. 在进程装入内存时根据进程的大小动态地建立分区
   2. 采用空闲分区表或链来记录分区信息
   3. 没有内部碎片，但是有外部碎片

内部碎片：分配给某进程的内存区域中，如果有些部分没有用上。
外部碎片：是指内存中的某些空闲分区由于大小而难以利用。