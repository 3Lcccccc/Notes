# 查找

## 顺序结构

- 顺序查找
  - 平均查找长度
    - 成功：$ASL=P_i(n-i+1)$其中$P_i$为第$i$个元素的查找概率
    - 失败：$ASL+n+1$
- 折半查找
  - 判定树
    - 高为：$log(n+1)$向上取整
    - 中序遍历是有序序列
    - 右子树结点数-左子树结点树$=1$或$0$
  - 比较次数不会高于判定树高
  - 平均查找长度
    - 成功：$ASL=\log_2(n+1)-1$
    - 失败：构建判定树更好理解
- 分块查找
  - 基本思想
    - 将表划分为若干个块，生成一个索引表
    - 块内可以无序，块之间有序
    - 比如：索引表存储最大或最小值
  - 效率最高时：索引块大小为$\sqrt{n}$
  - 平均查找长度
    - $ASL=L_i+L_s$

## $B$树和$B+$树

- $B$树
  - **通俗形容：** 满的平衡二叉树,结点内有$k$个关键字和$k+1$个指针,叶子结点类似于折半查找中的失败结点
  - 特性
    - 树中每个结点至多有$m$课子树,即至多有含有$m-1$个关键字
    - 若根不是叶子,则至少有两颗子树
    - 除根结点外的所有非叶子结点至少有$\lceil\frac{m}{2}\rceil$课子树,至少含有$\lceil\frac{m}{2}\rceil-1$个关键字
    - 所有非叶子结点如下：
      - $|n|p_0|k_1|\cdots |k_n|p_n|$
      - 其中$k_i$为结点的关键字,且$k_1<k_2$
      - $p_i$为指向子树根结点的指针,且指向的子树的所有结点的关键字均小于$k_i$
      - 所有叶子结点都在同一层,且不带信息(类似折半查找判定树中的失败结点)
    - 基本操作
      - 查找：于二叉排序树类似
      - 插入
        - 定位-插入-关键字溢出-分裂
        - 分裂：
          - 选择中间的一个关键字将结点划为两个部分
          - 划分的关键字为双亲的新关键字
          - 左边的关键字在原结点中
          - 右边的关键字存放在新结点中
          - 如果导致双亲结点溢出则继续重复至根节点
      - 删除
        - 直接删除关键字
          - 所在结点的关键字个数$\geqslant \lceil\frac{m}{2}\rceil$
        - 兄弟够借
          - 所在结点删除前的的关键字个数$=\lceil\frac{m}{2}\rceil-1$,且兄弟的关键字个数$\geqslant \lceil\frac{m}{2}\rceil$
          - 调整兄弟和双亲的位子
        - 兄弟不够借
          - 合并双亲和兄弟
- $B+$树
  - 在数据库中应用
  - 结点子树与关键字数相同
  - 分支结点仅起到索引作用
  - 叶子结点包含所有关键字,并且像链表一样相连
- 哈希表
  - 哈希函数构造方法
    - 直接定址法
      - $H(key)=a\times key+b$
      - 计算简单不会产生冲突,适合关键字连续的情况
    - 除留余数法
      - $H(key)=key$%$p$
      - $p=$不大于表长但最接近表长的质数
    - 数字分析法
    - 平方取中法
  - 冲突：通过哈希函数确定的地址已经存在其他元素
  - 装填因子：表中记录/表长
  - 处理冲突
    - 开发定址法
      - 发生冲突了调用$H_{i+1}$
      - $H_i=(H(key)+d_i)$%$m$ $m$为表长，$d_i$为增量序列
      - 线性探测：$d_i=0,1,2,3,4\cdots $
      - 平方探测：$d_i=0^2,1^2,-1^2,2^2,-2^2\cdots $
      - 伪随机序列：$d_i=$伪随机序列
      - 再散列：使用多个散列函数
      - 删除时不能直接删除元素，而是做一个标记否则有可能无法查找到同义词
    - 拉链法
      - 类似邻接表法
      - 将同义词用链表挂在哈希表上