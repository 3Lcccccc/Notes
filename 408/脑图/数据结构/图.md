# 图

## 图的定义

- 连通图
  - 任意两个顶点之间都是连通的
- 完全图
  - 有 $\displaystyle \frac{n(n-1)}{2}$条边的无向图
  - 有$n(n-1)$条边的有向图
  - 含有最多的边
- 连通分量
  - 无向图的极大连通子图
- 极大连通子图
  - 要求包含其所有的边
  - 连通图只有一个极大连通子图，就是它本身
- 极小连通子图
  - 要求保持图连通，又要边的数量最少
  - 顶点`ｎ`个,边`n-1`条
- 强连通
  - 顶点之间互相连通
- 生成树、森林
  - 连通图的生成树是包含图中全部顶点的一个极小连通子图
  - 非连通图的生成树构成了生成森林
- 无向图的度
    - 顶点$v$的度是指依附该顶点的边的条数，记作$TD(v)$
    - 全部顶点的度之和等于边数的两倍
- 有向图的度
  - 入度记为$ID(v)$，出度记为$OD(v)$
  - $TD(v)=ID(v)+OD(v)$
- 无向图中讨论连通性，有向图讨论强连通 

## 图的存储

- 邻接矩阵
  - 存储方式
    - **无向图：** 矩阵沿主对角线对称，有边为1，无边为0
    - **有向图：** 行代表出度，列代表入度
    - **网：** 在有向图的基础上用权值数值取代原本的$1$，$\infty$或$0$取代原本的$0$
  - 比较容易确认任意两个顶点是否有边相连.
  - 空间复杂度为$O(n^2)$
  - 适用于稠密图
- 邻接表法
  - 存储方式
    - 由顶点表和边表构成.
    - **顶点表** 由顶点域`data`和指向下一条邻接边`firstarc`构成
    - **边表由** 邻接点域`adjvex`和`nextarc`构成
    - 顶点表中的指针指向边表，边表中的指针再指向下一个边表
  - 空间复杂度 有向图为$O(|V|+|E|)$ 无向图为$O(|V|+2|E|)$
  - 对于有向图只需存储指向的边
  - 适用于稀疏图
  - 邻接表不唯一
- 十字链表
  - 存储方式
    - 由顶点结点与边结点构成
    - 顶点结点：**数据域** `data`、`firstin`和`firstout`分别指向以该结点为尾或头的边
    - 边结点：
      - 尾域`tailvex`和头域`headvex`分别存储边尾和边头的位置
      - 链域`hlink`和`tlink`分别指向以相同结点为头或尾的下一条边
  - 容易找到以某结点为头或尾的结点，从而求出入度和出度
  - 是有向图的一种链式存储结构
  - ⚠️:存储的是顶点和边
- 邻接多重表
  - 存储方式
    - 由顶点结点与边结点构成
    - 顶点结点：数据域`data`和`firstedge`构成
    - 边结点:
      - 标志域`mark`记录该边是否被搜索过
      - `ivex`和`jvex`为该边依附的两个结点的位置
      - `ilink`和`jlink`为下一条依附为`ivex`或`jvex`的边
  - 是无向图的一种链式存储结构
  - 与邻接表相比,同一条边邻接多重表只有一个结点

## 图的遍历

- 广度优先遍历(BFS)
  - 依次访问顶点v的为访问过的相邻顶点
  - 每次访问只能访问一个连通分量
  - 性能分析
    - 邻接表：时间复杂度$O(|V|+|E|)$ 
    - 邻接矩阵：时间复杂度$O(|V|^2)$
    - 空间复杂度最坏的情况下$O(|V|)$
  - 生成树
    - 邻接矩阵的是唯一的
- 深度优先遍历(DFS)
  - 依次递归访问顶点v的相邻顶点
  - 每次访问只能访问一个连通分量
  - 生成树
    - 邻接矩阵的是唯一的
    - 对非连通图使用DFS得到的是森林
  - 性能分析
    - 邻接表：时间复杂度$O(|V|+|E|)$
    - 邻接矩阵：时间复杂度$O(|V|^2)$
    - 空间复杂度$O(|V|)$
- 可以用来判断图的连通性

## 图的应用

- 最小生成树
  - 性质
    - 最小生成树不唯一，当图各边的权值不相等时，是唯一的
    - 若无向连通图的边数为$n-1$，最小生成是它本身(本身就是一颗树)
    - 最小生成树的权值之和总是唯一的
  - $Prim$算法
    - 先向树添加任意一个顶点
    - 在依次添加权值最小的边和依附它的顶点
    - 时间复杂度：$O(|V|^2)$
    - 适用于求变稠密的图最小生成树
  - $Kruskal$算法
    - 初始时为$n$个顶点,各自形成一个连通分量
    - 依次选取连通分量之间权值最小的边,并产生新的连通分量
    - 时间复杂度：$O(|E|\log|E|)$
    - 适合于边稀疏二顶点较多的图
- 最短路径 🛠️
  - $Dijkstra$算法
    - 求单源最短路径(源点到其他各点的最短路径)
    - 不适用于权值带负值
    - 于$prim$算法相似
    - 时间复杂度$O(|V|^2)$
  - $Floyd$算法
    - 求每对顶点间的最短路径
    - 不允许带负权值边组成的回路
    - $A^{(K)}[i][j]=Min{A^{k-1}[i][j],A^{k-1}[k][j]+A^{k-1}[i][k]}$
    - $A$为图的邻接矩阵
    - 时间复杂度$O(|V|^3)$
- 有向无环图描述表达式
  - 运算符为根，数值位叶子
  - 相同的内容共用
- 拓扑排序
  - 定义
    - 每个顶点只出现一次
    - 若顶点A在在序列中排在顶点B前面，则图中不存在顶点B到顶点A的路径
  - $AOV$网
    - 顶点表示活动,用有限边$<V_i,V_j>$,活动$V_i$必须先于活动$V_j$
  - 流程
    - 从$AOV$网中选择一个没有前驱的顶点并输出
    - 从网中删除该顶点和所以以它为起点的有向边
    - 重复至网为空或不存在无前驱的顶点为止，后一种情况表明图有环
    - 时间复杂度$O(|V|+|E|)$
  - 邻接矩阵为三角矩阵时，拓扑序列存在，反之不一定
  - 每个顶点只有唯一的前后继关系时，拓扑排序唯一
  - 若不存在拓扑序列，则图中必定存在回路，该回路构成一个强连通分量
- 关键路径
  - $AOE$网
    - 带权值的$AOV$网
    - 仅有一个入度为0的顶点,称为开始顶点.表示整个工程的开始
    - 仅有一个出度为0的顶点,称为结束顶点.表示整个工程的结束
    - 完成工程的最短时间就是关键路径的长度
  - 活动是弧,事件是顶点
  - **事件** 最早发生时间$Ve(k)$
    - 从源点$V_1$到顶点$V_k$的路径长度
    - 拓扑排序
  - **活动** 最早发生时间$e(i)$
    - 该活动弧的起点所表示的事件最早开始发生时间
  - **事件** 最迟发生时间$Vl(k)$
    - 所有后继的最迟发生时间减去相应的弧权值中的最小值
    - 逆推
  - **活动** 最迟发生时间$l(i)$
    - 该活动弧的终点所表示事件的最迟发生时间与该活动所需时间之差.
  - 具有最大长度的路径叫做关键路径
  - 关键路径上的所有活动都是关键活动
  - 加速关键活动可以缩短工程的周期，关键活动缩短到一定程度会变成非关键活动
  - 关键路径并不唯一