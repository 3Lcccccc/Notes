# 中央处理器

## CPU的功能和基本结构

### CPU的功能

- 指令控制
- 操作控制
- 时间控制
- 数据加工
- 中断处理

### CPU的基本结构

- **运算器**
  - 算术逻辑单元
  - 暂存寄存器
  - 累加寄存器
  - 通用寄存器组
  - 程序状态字寄存器
    - 溢出标志(OF)
    - 符号标志(SF)
    - 零标志(ZF)
    - 进位标志(CF)
  - 移位器
  - 计数器
- **控制器**
  - 程序计数器
  - 指令寄存器
  - 指令译码器
  - 存储器地址寄存器
  - 存储器数据寄存器
  - 时序器
  - 微操作信号发生器

## 指令执行过程

### 指令周期的数据流
- 取值周期
  - **PC**$\rightarrow$**MAR**$\rightarrow$**地址总线**$\rightarrow$**主存**
  - **CU发出控制信号**$\rightarrow$**控制总线**$\rightarrow$**主存**
  - **主存**$\rightarrow$**数据总线**$\rightarrow$**MDR**$\rightarrow$**IR**
  - **CU发出读命令**$\rightarrow$**(PC)+"1"**
- 间址周期
  - **Ad(IR)** 或者 **MDR**$\rightarrow$**MAR**$\rightarrow$**地址总线**$\rightarrow$**主存**
  - **CU发出读命令**$\rightarrow$**控制总线**$\rightarrow$**主存**
  - **主存**$\rightarrow$**数据总线**$\rightarrow$**MDR**
- 执行周期
  - 执行的操作不同,数据流向也不同
- 中断周期
  - 将程序断点存入堆栈中,并用SP指向栈顶地址
  - **CU控制将SP减1,SP**$\rightarrow$**MAR**$\rightarrow$**地址总线**$\rightarrow$**主存**
  - **CU发出写命令**$\rightarrow$**控制总线**$\rightarrow$**主存**
  - **PC**$\rightarrow$**MDR**$\rightarrow$**数据总线**$\rightarrow$**主存**(程序断点存入主存)
  - **CU**$\rightarrow$**PC**

##　指令执行方案
- 单指令周期
  - 对所有指令都选用相同的执行时间来完成
- 多指令周期
  - 对不同类型的指令选用不同的执行步骤来完成
- 流水线方案