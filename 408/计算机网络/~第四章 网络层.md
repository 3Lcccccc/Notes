# 4.3 IPv4

## 4.3.1 IPv4分组

### 1.IPv4分组的格式

![](2021-08-02-21-12-18.png)

### 2.IP数据报分片

**最大传输单元(MTU)**：数据链路层数据报能承载的最大数据量(以太网是1500字节)

![](2021-08-02-21-22-28.png)

## 4.2.2 IPv4地址与NAT

### 1.IPv4地址

IP地址：全世界唯一的32位/4字节标识符，标识路由器主机的接口
IP地址::=网络号，主机号

![](2021-08-02-21-49-17.png)

**特殊IP地址**
1. 主机号全0表示网络本身
2. 主机号全为1表示网络的广播地址，对特定网络上的所有主机进行广播
3. 127.0.0.0保留位环环自检地址，此地址表示任意主机本身，目的地址位环地址的IP数据包永远不会出现在任何网络上
4. 32位全0，本网络上的本主机
5. 32位全1表示整个TCP/IP网络的广播地址，又称受限广播地址。

![](2021-08-02-22-04-37.png)

### 2.网络地址转换

网络地址转换NAT：在**专用网**连接到**因特网**的路由器上安装NAT软件，安装了NAT软件的路由器将**NAT路由器**，它至少有一个有效的**外部全球IP地址**。

⚠️普通路由器在转发IP数据报时，不改变其源IP地址和目的IP地址。而NAT路由器在转发IP数据报时，一定要更换其IP地址。

## 4.3.3 子网划分与子网掩码、CIDR

### 1.子网划分

1. 子网划分纯属一个单位内部的事情。单位对外部仍然表现为没有划分子网的网络
2. 从主机号借若干比特作为子网号，当然主机号也就相应减少了相同的比特。(主机号至少两位，因为不能全0或全1)

### 1.子网掩码
1对于网络号和子网号，0对应主机号
用子网掩码与IP地址相与，就得到子网网络地址