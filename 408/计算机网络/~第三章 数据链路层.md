# 3.1 数据链路层的功能

## 3.1.1 数据链路层的基本概念

1. 结点：主机、路由器
2. 链路：两个结点之间的物理通道
3. 数据链路：网络中两个结点之间的逻辑通道
4. 帧：链路层的协议数据单位，封装网络层数据报

## 3.1.2 为网络提供服务

1. 无确认的无连接服务
   1. 发送方无需建立链路连接，接收方无需发送确认
2. 有确认的无连接服务
   1. 发送方无需建立链路连接，接收方必须发送确认
3. 有确认的面向连接服务
   1. 传输过程分为三个阶段
      1. 建立数据链路
      2. 传输帧
      3. 释放数据链路

⚠️有连接就一定要确认，所以不存在 无确认的面向连接服务

## 3.1.3 链路管理

数据链路层连接的建立、维持、释放过程称为链路管理。
主要用于面向连接的服务

## 3.1.4 帧定界、帧同步与透明传输

**封装成帧**：在一段数据的前后部分添加首部和尾部。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和接收。

**帧同步**：接收方应当能从接收到的二进制比特流中区分处帧的起始和终止。

**透明传输**：不管所传数据是什么样的比特组合，都应当能过在链路上传送。


## 3.2 组帧

### 3.2.1 字符计数法

帧首部使用第一个字符作为计算字段来表明帧内字符数(包括自身)

### 3.2.2 字符填充法

利用控制字符SOH放在帧的最前面表示开始、EOT放在末尾表示结束。同时如果原始数据里有编码与控制字符一样的数据在其前面插入转义字符ESC来区分，接收方收到后会删除自己插入的转义字符

### 3.2.3 零比特填充法

在首部和尾部使用0111110来表示帧的开始与结束，同时在发送端扫描整个信息字段，如果发现5个1就在后面填入一个0，在接收方，先通过标志端确定帧，然后同样扫面整个信息字段，发现5个1就删除后面的一个0.

### 3.2.4 违规编码法

使用信息编码方式中不会使用到的编码来表示开始与结束。

## 3.3 差错控制

**差错**
1. 位错
   1. 1变成0、0变成1
2. 帧错
   1. 丢失
   2. 重复
   3. 失序


### 3.3.1 检错编码

#### 1. 奇偶校验码

添加1位校验元。

奇校验码：添加后，码字中"1"有奇数个
偶校验码：添加后，码字中"1"有偶数个

只能检测奇数位比特位出错，检测不了偶数位出错。

#### 2. 循环冗余码(CRC)

1. 在原数据后面加上r个0(r为多项式的阶)
2. 使用加0后的数据对多项式做除法
3. 得到的余数就是冗余码(FCS)，用冗余码取代之前添加的0

**检错**：接收方使用接收到的数据除以多项式为0则无错

FCS的生成以及接收端CRC检验都是由硬件实现，处理很迅速，因此不会延误数据的传输。
